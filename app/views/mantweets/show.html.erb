<%= render "shared/header" %>

<div class="item-show">
  <div class="item-box">
    <h2 class="name">
      <%= @mantweet.name %>
    </h2>
    <div class='item-img-content'>
      <%= image_tag @mantweet.image ,class:"item-box-img" %>
    </div>  
  </div> 

  <div class="item-explain-box">
      <span><%= @mantweet.description %></span>
    </div>

<% if current_user.already_favorited?(@mantweet) %>
            <%= link_to mantweet_favorites_path(@mantweet), method: :delete do %>
              <i class="fas fa-heart"></i>
            <% end %>
            <%= @mantweet.favorites.count %>
          <% else %>
            <%= link_to mantweet_favorites_path(@mantweet), method: :post do %>
              <i class="far fa-heart"></i>
            <% end %>
            <%= @mantweet.favorites.count %>
          <% end %>

  <% if user_signed_in? && current_user.id == @mantweet.user_id %>
  <div class="show-btn">
    <%= link_to '編集', edit_mantweet_path(@mantweet.id) , method: :get, class: "item-red-btn" %>
    <%= link_to '削除', "#", method: :delete, class:'item-destroy' %>
  </div>
  <% end %>
<div class="comment-wrapper border-top mb-10">
  <p class="mt-5">コメント一覧</p>
  <% @comments.each do |c| %>
    <div>
      <% unless c.user.blank? %>
        <a href="<%= user_path(c.user_id) %>"></a>
        <% end %>
      <%= c.user.nickname unless c.user.blank? %>
      <br />
      <%= c.text %>
    </div>
    <br />
  <% end %>
  <% if user_signed_in? %>
    <%= form_with(model: [@mantweet, @comment], local: true) do |f| %>
      <%= f.text_area :text, class: "form-control", rows: 5 %>
      <%= button_tag type: "submit", class: "btnbtn-successfloat-rightmt-1" do %>
        <i class="far fa-comments"></i> コメントする
      <% end %>
    <% end %>
  <% end %>
</div>
</div>      